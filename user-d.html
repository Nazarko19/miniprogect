<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<div id="id2"></div>
<div id="id3"></div>

<script>

    const jsonuser = new URL(location).searchParams.get('user')

    const user1 = JSON.parse(jsonuser)

    const user2 =  document.getElementById('id2')

    user2.innerText = JSON.stringify(user1,null,2)

     const btn = document.createElement('button')

     btn.innerText = 'Post of current user'

     document.body.appendChild(btn)


    btn.onclick = function () {
        fetch(`https://jsonplaceholder.typicode.com/users`)
        .then(value => value.json())
        .then(value => {
            for (let user of value){
                // console.log(user)
                fetch(`https://jsonplaceholder.typicode.com/users/${user.id}/posts`)
                .then(value => value.json())
                .then(value => {
                    for (let post of value){
                        console.log(post.title)
                    }

                })
            }
        })

    }









    // console.log(location.href)
    //
    // const url = new URL(location);
    //
    // const jsonuser = url.searchParams.get(`user`)
    //
    // console.log(jsonuser)
    //
    // const user1 = JSON.parse(jsonuser)
    //
    // console.log(user1)
    //
    // console.log(url);
    //
    // document.body.innerText = JSON.stringify(user1,null,2)


</script>
</body>
</html>








